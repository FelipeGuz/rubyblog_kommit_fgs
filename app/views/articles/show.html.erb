
<%= render "shared/header", article: @article, title: 'Articles Blog'%>

<%# Title and score %>
<header>
    <div class="p-5 pb-md-4 mx-auto text-center">
        <h1 class="display-2 fw-normal"><%= @article.title %></h1>
    </div>
    <div class="container d-flex justify-content-between">
        <div class="py-md-3 text-left" style="font-size:20px">
            By: <%= User.find(@article[:user_id]).email%>
        </div>
        <div class="p-md-2 mb-3 text-right border border-warning rounded" style="font-size:25px; border-width: 3px;">
            <%= (@article.comments.reduce(0) {|p,a| p+a.score}/@article.comments.size.to_f).round(2)%>
        </div>
    </div>
</header>


<%# Articles %>
<div class="container px-4">
    <% @article.body.split("\n").each do |paragraph|%>
        <p class="text-justify" style="font-size:20px"><%= paragraph%></p>
    <% end %>
</div>


<%# Edit and destroy buttons %>

<div class="container border-bottom">
    <div class="d-grid d-sm-flex justify-content-sm-end">
        <button class="btn btn-secondary btn-lg pr-5 m-3" type="button">
            <%= link_to "Edit", edit_article_path(@article), class: "text-white" %>    
        </button>
        <button class="btn btn-secondary btn-lg pr-5 m-3" type="button">
            <%= link_to "Destroy", article_path(@article), method: :delete, data: {confirm: "Are you sure?"}, class: "text-white" %>    
        </button>
    </div>
</div>


<%# What do you think? message %>
<div class="container px-4">
    <div class="p-4 pb-md-4 mx-auto text-center">
        <h2 class="display-4 fw-normal">What do you think?</h2>
    </div>
</div>

<%# Add Comments %>
<%= render 'comments/form' %>

<%# What people think? message %>
<div class="container px-4 pt-5">
    <div class="p-4 pb-md-4 mx-auto text-center">
        <h2 class="display-4 fw-normal">What do people think?</h2>
    </div>
</div>

<%# Comments %>
<%= render @article.comments[0...-1] %>

<footer style="height: 50px"></footer>

